{% extends "traktplus/trakt-base.html" %}
{% block trakt_title %}{{ title }}{% endblock %}
{% block trakt_content %}
{% if calendar %}

<div class="trakt_choices">
  <b>{{ type }}</b>
  {% if type == 'My Shows' %}
    <a class="button addloading" data-xhr_url="calendar/premieres">Premieres</a>
    <a class="button addloading" data-xhr_url="calendar/shows">Shows</a>
  {% elif type == 'Shows' %}
    <a class="button addloading" data-xhr_url="calendar/my shows">My Shows</a>
    <a class="button addloading" data-xhr_url="calendar/premieres">Premieres</a>
  {% else %}
    <a class="button addloading" data-xhr_url="calendar/my shows">My Shows</a>
    <a class="button addloading" data-xhr_url="calendar/shows">Shows</a>
  {% endif %}
</div>

<div class="calendar">
  <ul>
    {% for day in dates %}
      <span class="date"><b>{{ calendar[day][0]['airs_at']|format_date('day') }}</b></span>
      {% for item in calendar[day] %}
        <li>
          <span class="goto_show list_link addloading" data-id="{{ item.show.ids.slug }}">
            {{ item.show.title }}
          </span>
          {% if type != 'Premieres'%}
            <span
              class="goto_episode list_link addloading" 
              data-id="{{ item.show.ids.slug }}" 
              data-season="{{ item.episode.season }}"
              data-episode="{{ item.episode.number }}"
            >
              {{ item.episode.season }}x{{ item.episode.number }} - {{ item.episode.title }}
            </span>
          {% else %}
            Season {{ item.episode.season }}
          {% endif %}
          {% if item.show.airs.time %}
             <span class="time">{{ item.show.airs.time|format_date('time') }}</span>
          {% else %}
             <span class="time">Unknown</span>
          {% endif %}
        </li>
	    {% endfor %}
    {% endfor %}
  </ul>
</div>

{% endif %}
{% endblock %}
